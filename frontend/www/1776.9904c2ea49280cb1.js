"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1776],{1776:(T,p,a)=>{a.r(p),a.d(p,{ChatPageModule:()=>y});var c=a(6895),l=a(433),r=a(5035),g=a(8345),n=a(8256),h=a(1135),m=a(262),C=a(4004),b=a(2340),f=a(529);let u=(()=>{class t{constructor(e){this.http=e,this.messagesSubject=new h.X([]),this.messages=this.messagesSubject.asObservable(),this.apiUrl=b.N.apiUrl}getMessages(e){this.http.get(this.apiUrl+"/api/v1/message?id="+e).pipe((0,m.K)(()=>(this.messagesSubject.error("An error occurred"),[])),(0,C.U)(s=>s)).subscribe(s=>{this.messagesSubject.next(s)})}addMessage(e){return this.http.post(this.apiUrl+"/api/v1/message",e).subscribe(s=>{this.messagesSubject.getValue().push(s)})}}return t.\u0275fac=function(e){return new(e||t)(n.LFG(f.eN))},t.\u0275prov=n.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),M=(()=>{class t{constructor(){}ngOnInit(){console.log(this.chat)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-chat-box"]],inputs:{chat:"chat",current_user_id:"current_user_id"},decls:8,vars:5,consts:[["lines","none"],[1,"ion-text-wrap",3,"slot"],["name","checkmark-done-outline",3,"color"]],template:function(e,o){1&e&&(n.TgZ(0,"ion-item",0)(1,"ion-label",1)(2,"ion-text"),n._uU(3),n.qZA(),n.TgZ(4,"ion-note")(5,"small"),n._uU(6,"10:00AM"),n.qZA(),n._UZ(7,"ion-icon",2),n.qZA()()()),2&e&&(n.Tol((null==o.chat?null:o.chat.sender)!=o.current_user_id?"sender":"user"),n.xp6(1),n.Q6J("slot",(null==o.chat?null:o.chat.sender)==o.current_user_id?"end":"start"),n.xp6(2),n.Oqu(null==o.chat?null:o.chat.content),n.xp6(4),n.Q6J("color",(null==o.chat?null:o.chat.sender)==o.current_user_id?"light":"primary"))},dependencies:[r.gu,r.Ie,r.Q$,r.uN,r.yW],styles:['ion-item[_ngcontent-%COMP%]{--background: transparent;--padding-start: 8px;--padding-end: 0px;--ion-safe-area-left: 0px;--min-height: 32px;--border-width: 0}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{position:relative;border-radius:12px;padding:4px 8px;margin-top:12px;max-width:70%}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{font-weight:400;font-size:.9rem}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]:after{content:"";width:52px;height:12px;display:inline-block;vertical-align:top;visibility:hidden;font-size:.75rem}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{position:absolute;display:flex;right:0;bottom:0;padding:4px 8px 4px 4px;line-height:16px;pointer-events:auto;color:var(--ion-color-medium)}.sender[_ngcontent-%COMP%]:after{content:"";position:absolute;border:0 solid transparent;border-top-color:transparent;border-top-style:solid;border-top-width:0px;border-top:9px solid var(--ion-color-light);border-radius:0 20px;width:15px;height:30px;transform:rotate(112deg);bottom:-4px;left:-4px}.sender[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin-left:8px;background-color:var(--ion-color-light)}.sender[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]:after{width:72px!important}.sender[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{margin-right:2px;line-height:16px}.sender[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.user[_ngcontent-%COMP%]:after{content:"";position:absolute;border:0 solid transparent;border-bottom-color:transparent;border-bottom-style:solid;border-bottom-width:0px;border-bottom:9px solid var(--ion-color-primary);border-radius:20px 0;width:15px;height:30px;transform:rotate(50deg);bottom:0;right:0}.user[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{background-color:var(--ion-color-primary);color:#fff}.user[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]:after{width:72px!important}.user[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{margin-right:2px;line-height:16px;color:var(--ion-color-dark)}.user[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}']}),t})();function P(t,i){if(1&t&&(n.TgZ(0,"ion-item-group",11),n._UZ(1,"app-chat-box",12),n.qZA()),2&t){const e=i.$implicit,o=n.oxw(2);n.xp6(1),n.Q6J("chat",e)("current_user_id",o.currentUserId)}}function _(t,i){if(1&t&&(n.TgZ(0,"ion-list",9),n.YNc(1,P,2,2,"ion-item-group",10),n.qZA()),2&t){const e=i.ngIf;n.xp6(1),n.Q6J("ngForOf",e)}}function x(t,i){if(1&t){const e=n.EpF();n.TgZ(0,"ion-fab-button",13),n.NdJ("click",function(){n.CHM(e);const s=n.oxw();return n.KtG(s.sendMessage())}),n._UZ(1,"ion-icon",14),n.qZA()}}function O(t,i){1&t&&(n.TgZ(0,"ion-fab-button",15),n._UZ(1,"ion-spinner",16),n.qZA())}const v=[{path:"",component:(()=>{class t{constructor(e,o){this.route=e,this.messageService=o,this.name="Chat",this.isLoading=!1,this.currentUserId=1,this.messages$=this.messageService.messages}ngOnInit(){this.room=this.route.snapshot.params.id,this.messageService.getMessages(""+this.room)}sendMessage(){this.messageService.addMessage({content:this.message,sender:2,room:this.room})}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(g.gz),n.Y36(u))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-chat"]],decls:15,vars:7,consts:[["color","primary"],["slot","start"],["defaultHref","/home"],["lines","none",4,"ngIf"],["color","light"],["autoGrow","","rows","1","placeholder","Send message",1,"ion-text-center",3,"ngModel","ngModelChange"],["slot","end"],["size","small","color","primary",3,"click",4,"ngIf"],["size","small","color","primary",4,"ngIf"],["lines","none"],["class","chats-group",4,"ngFor","ngForOf"],[1,"chats-group"],[3,"chat","current_user_id"],["size","small","color","primary",3,"click"],["name","send"],["size","small","color","primary"],["name","crescent","color","white"]],template:function(e,o){1&e&&(n.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),n._UZ(3,"ion-back-button",2),n.qZA(),n.TgZ(4,"ion-title"),n._uU(5),n.qZA()()(),n.TgZ(6,"ion-content"),n.YNc(7,_,2,1,"ion-list",3),n.ALo(8,"async"),n.qZA(),n.TgZ(9,"ion-footer")(10,"ion-toolbar",4)(11,"ion-textarea",5),n.NdJ("ngModelChange",function(d){return o.message=d}),n.qZA(),n.TgZ(12,"ion-buttons",6),n.YNc(13,x,2,0,"ion-fab-button",7),n.YNc(14,O,2,0,"ion-fab-button",8),n.qZA()()()),2&e&&(n.xp6(5),n.Oqu(o.name),n.xp6(2),n.Q6J("ngIf",n.lcZ(8,5,o.messages$)),n.xp6(4),n.Q6J("ngModel",o.message),n.xp6(2),n.Q6J("ngIf",!o.isLoading),n.xp6(1),n.Q6J("ngIf",o.isLoading))},dependencies:[c.sg,c.O5,l.JJ,l.On,r.oU,r.Sm,r.W2,r.W4,r.fr,r.Gu,r.gu,r.Ub,r.q_,r.PQ,r.g2,r.wd,r.sr,r.j9,r.cs,M,c.Ov],styles:["ion-content[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{background:transparent}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{padding:0 3px}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%]{border:1px solid var(--ion-color-medium);border-radius:20px;margin:.5vh 0}"]}),t})()}];let Z=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[g.Bz.forChild(v),g.Bz]}),t})(),y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({providers:[u],imports:[c.ez,l.u5,r.Pc,Z]}),t})()}}]);